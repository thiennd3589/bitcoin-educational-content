---
name: Electrum

description: 0からヒーローへの完全なElectrumガイド
---

![cover](assets/cover.webp)

Electrumについての説明

https://twitter.com/ElectrumWallet
https://electrum.org/
https://electrum.readthedocs.io/

> "このガイドを見つけたとき、本当に驚きました。これを作成したArman the Parmanにおめでとうを言わなければなりません。できるだけ多くの言語に翻訳してここに掲載しないのはもったいないことです。正直、その人にチップをあげてください。" Rogzy

オリジナルの投稿:

![Electrumデスクトップウォレット（Mac / Linux）- ダウンロード、検証、あなたのノードに接続する。](https://youtu.be/wHmQNcRWdHM)

![ElectrumでのBitcoin取引の実行](https://youtu.be/-d_Zd7VcAfQ)

## なぜElectrumなのか？

これはElectrum Bitcoinウォレットの使用方法に関する詳細なガイドであり、数年間の使用とBitcoinのセキュリティ/プライバシーについて学生を教えた後に開発した、そのすべての罠と癖に対する解決策を提供します。Electrumは、すべてをできるだけシンプルに保ちたいと考え、初心者レベルに留まることを好む人にとって最適なBitcoinウォレットではありません。代わりに、それは「パワー」ユーザーである、またはそうなりたいと望む人のためのものです。

新しいBitcoinユーザーにとっては、経験豊富なユーザーが指導のもとで使用方法を示す場合にのみ優れています。一人で使用方法を学ぶ場合は、最初は少量のsats（サトシ）を使ってテスト環境で時間をかけて使用する限り、安全です。このガイドはその取り組みをサポートしていますが、他の誰にとっても良い参考資料です。

> 警告：このガイドは大きいです。すべてを一日で試みないでください。ガイドを保存して、時間をかけて少しずつ進めるのが最善です。

## Electrumのダウンロード

理想的には、Bitcoin取引用の専用コンピューターを使用してください（これについての私のガイド https://armantheparman.com/mint/）_(プライバシーセクションにもあります)_。最初に学んでいるときに「汚れた」コンピューターで少額を練習するのは問題ありません（何年もの間に通常のコンピューターがどれだけの隠れたマルウェアを蓄積しているか分かりません - それらをBitcoinウォレットにさらしたくありません）。

Electrumは https://electrum.org/ から入手してください。

上部のダウンロードタブをクリックします。

コンピューターに対応するダウンロードリンクをクリックします。LinuxまたはMacコンピューターはPythonリンク（赤い円）を使用できます。IntelまたはAMDチップを搭載したLinuxコンピューターはAppimage（緑の円；これはWindows実行ファイルのようなものです）を使用できます。Raspberry PiデバイスにはARMマイクロプロセッサーが搭載されており、Pythonバージョン（赤い円）のみを使用でき、Appimageは使用できません、PiがLinuxを実行していてもです。青い円はWindows用で、黒い円はMac用です。

![image](assets/1.webp)

## Electrumの検証

ダウンロードを「検証」する目的は、データの1ビットも改ざんされていないことを確認することです。これにより、「ハッキング」された悪意のあるソフトウェアバージョンを使用することを防ぎます。練習用にダウンロードしたコピーを使用する場合は、この手順を省略しても問題ありません。つまり、重要なお金を持つウォレットを使用しない場合です。その後、実際の資金にElectrumを使用する準備ができたら、コピーを削除して最初からやり直し、今回はダウンロードを検証してください。
これを行うために、公開鍵/秘密鍵暗号ツールであるgpgを使用します。こちらでガイドを書いています（https://armantheparman.com/gpg/）。gpgツールはすべてのLinuxオペレーティングシステムに付属しています。MacとWindowsについては、ダウンロード手順についてはgpgリンクを参照してください。

Electrumソフトウェアをダウンロードするだけでなく、セキュリティのためにはソフトウェアのデジタルSIGNATUREも必要です。これはテキストの文字列です（実際にはテキストを使用してエンコードされた数値です）で、開発者が彼のPRIVATE gpgキーで生成しました。gpgプログラムを使用して、このSIGNATUREを公開キー（開発者の秘密キーから作成されたもの）に対して「テスト」することができます。この公開キーは誰でもアクセスできますが、ダウンロードファイルと対比させます。

言い換えれば、3つの入力（署名、公開キー、データファイル）を使用して、ファイルが改ざんされていないことを確認するための真または偽の出力を得ます。

署名を取得するには、ダウンロードしたファイルに対応するリンクをクリックします（色付きの矢印を参照）：

![image](assets/2.webp)

リンクをクリックすると、ファイルが自動的にダウンロードフォルダにダウンロードされるか、ブラウザで開く場合があります。ブラウザで開いた場合は、ファイルを保存する必要があります。「名前を付けて保存」を選択するために右クリックできます。オペレーティングシステムやブラウザによっては、テキストではなく白いスペースエリアを右クリックする必要があるかもしれません。

以下はダウンロードされたテキストの見た目です。複数の署名があることがわかります - これらは異なる人々による署名です。それぞれを、または任意のものを検証できます。ここでは、開発者のものをどのように検証するかを示します。

![image](assets/3.webp)

次に、ThomasVの公開キーを入手する必要があります - 彼は主要な開発者です。それは直接彼から、彼のKeybaseアカウント、Github、または他の誰か、キーサーバー、またはElectrumウェブサイトから入手できます。

Electrumウェブサイトから入手することは実際には最も安全ではない方法です。なぜなら、このウェブサイトが悪意のあるものである（私たちが確認しようとしていること）のであれば、なぜそれから公開キーを取得しているのか（公開キーは偽物かもしれません）。

今のところ簡単にするために、ウェブサイトからどのように入手するかを示しますが、これを念頭に置いてください。こちらはGitHub上のコピーです（https://github.com/spesmilo/electrum/blob/master/pubkeys/ThomasV.asc）で、それと比較することができます。

ページを少し下にスクロールして、ThomasVの公開キーへのリンクを見つけます（下の赤い円）。それをクリックしてダウンロードするか、ブラウザでテキストが開いた場合は、右クリックして保存します。

![image](assets/4.webp)

これで、ダウンロードフォルダにおそらく3つの新しいファイルがあります。それらがどこにあるかは重要ではありませんが、すべてを同じフォルダに置くとプロセスが簡単になります。

3つのファイル：

1. Electrumのダウンロード
2. 署名ファイル（通常はElectrumのダウンロードと同じファイル名に「.asc」が追加されます）
3. ThomasVの公開キー。

MacまたはLinuxでターミナルを開くか、Windowsでコマンドプロンプト（CMD）を開きます。

ダウンロードディレクトリ（または3つのファイルを置いた場所）に移動します。これが何を意味するのかわからない場合は、Linux/Mac用のこの短いビデオ（https://www.youtube.com/watch?v=AO0jzD1hpXc）とWindows用のこのビデオ（https://www.youtube.com/watch?v=9zMWXD-xoxc）から学んでください。Linuxコンピュータでは、ディレクトリ名が大文字と小文字を区別することを覚えておいてください。
ターミナルで、以下のコマンドを入力して、ThomasVの公開鍵をコンピュータの「キーリング」（キーリングは抽象的な概念ですが、実際にはコンピュータ上のファイルです）にインポートしてください：
```bash
gpg --import ThomasV.asc
```

ダウンロードしたファイル名が一致していることを確認してください。また、ダブルダッシュ（--）であることに注意してください。シングルダッシュではありません。さらに、「--import」の前後にはスペースがあることにも注意してください。その後、<enter>を押してください。

ファイルがインポートされるはずです。エラーが発生した場合は、ファイルが実際に存在するディレクトリにいるか確認してください。現在いるディレクトリを確認するには（MacまたはLinuxの場合）、pwdと入力します。現在いるディレクトリ内のファイルを確認するには（MacまたはLinuxの場合）、lsと入力します。「ThomasV.asc」というテキストファイルがリストされているはずです。他のファイルもあるかもしれません。

次に、署名を検証するコマンドを実行します。

```bash
gpg --verify Electrum-4.1.5.tar.gz.asc Electrum-4.1.5.tar.gz
```

ここには4つの「要素」があり、それぞれがスペースで区切られています。テキストを交互に太字にして、見やすくしています。4つの要素は以下の通りです：

1. gpgプログラム
2. --verifyオプション
3. 署名のファイル名
4. プログラムのファイル名

興味深いことに、4番目の要素を省略することができる場合があり、コンピュータが意図を推測します。確信はありませんが、ファイル名が末尾の「asc」だけが異なる場合にのみ機能すると思われます。

ここで示したファイル名を単にコピーするのではなく、システム上にあるファイル名と一致することを確認してください。

<enter>を押してコマンドを実行します。「ThomasVからの良い署名」と表示されれば成功です。他の人の署名の公開鍵を持っていないため、いくつかのエラーが発生するかもしれません。これらは署名ファイルに含まれている署名を1つのファイルに組み合わせるこのシステムが後のバージョンで変更されるかもしれないためです。また、下部には無視できる警告があります（これは、ThomasVの公開鍵をコンピュータが信頼していると明示的に伝えていないことを警告しています）。

これで、安全に使用できるElectrumの検証済みコピーが手に入りました。

## Electrumの実行

### Pythonを使用してElectrumを実行する場合

Pythonバージョンをダウンロードした場合、これが機能させる方法です。ダウンロードページには次のように表示されます：

![image](assets/5.webp)

Linuxの場合、まずシステムを更新することをお勧めします：

```bash
sudo apt-get update
sudo apt-get upgrade
```

黄色でハイライトされたテキストをコピーして、ターミナルに貼り付け、<enter>を押します。パスワードの入力、続行の確認が求められる場合があり、その後、それらのファイル（「依存関係」）がインストールされます。

また、選択したディレクトリに圧縮ファイルを展開する必要があります。これはグラフィカルユーザーインターフェースを使用するか、コマンドラインから（ピンクでハイライトされたコマンドを使用）行うことができます。ファイル名が異なる場合があることに注意してください。（前のセクションでダウンロードを検証したとき、展開されたディレクトリではなく、zipファイルを検証しました。）

PIPプログラムを使用して「インストール」するオプションもありますが、これは不要で、余分なステップやファイルのインストールが追加されます。それらをすべて回避して、ターミナルを使用してプログラムを実行するだけです。

手順（Linux）は以下の通りです：

1. ファイルが展開されたディレクトリに移動します。
2. 次のコマンドを入力します：./run_electrum

Macの場合、手順は同じですが、まずPython3をインストールする必要があるかもしれません。そして、このコマンドを使用して実行します：

```bash
```bash
python3 ./run_electrum
```

Electrumが起動すると、ターミナルウィンドウは開いたままになります。これを閉じると、Electrumプログラムも終了します。Electrumを使用している間は、最小化しておいてください。

### Appimageを使ってElectrumを実行する

これは少し簡単ですが、Windowsの実行ファイルほど簡単ではありません。使用しているLinuxのバージョンによっては、デフォルトでAppimageファイルに実行を許可しない属性が設定されている場合があります。これを変更する必要があります。Appimageが動作する場合は、この手順をスキップできます。ターミナルを使用してファイルがある場所に移動し、次のコマンドを実行してください：

```bash
sudo chmod ug+x Electrum-4.1.5-x86_64.AppImage
```

「sudo」はスーパーユーザー権限を与えるコマンド、「chmod」はモードを変更し、誰が読み取り、書き込み、実行できるかを変更するコマンド、「ug+x」はユーザーとグループの実行を許可するために変更していることを意味します。

ファイル名は、使用しているバージョンに合わせて調整してください。

その後、AppimageアイコンをダブルクリックするとElectrumが実行されます。

### MacでElectrumを実行する

ダウンロードしたファイル（「ドライブ」とされています）をダブルクリックするだけです。ウィンドウが開きます。ウィンドウ内のElectrumアイコンをデスクトップ上、またはプログラムを保管したい場所にドラッグします。その後、「ドライブ」を「取り出し」し、ドライブ（ダウンロードしたファイル）を削除できます。

プログラムを実行するには、それをダブルクリックするだけです。Mac固有の「保護者による制限」エラーが表示される場合があり、それを回避する必要があります。

### WindowsでElectrumを実行する

私が最も嫌うWindowsであるにもかかわらず、これが最も簡単な方法です。実行ファイルをダブルクリックして実行します。

## ダミーウォレットから始める

Electrumを初めて読み込むと、このようなウィンドウが開きます：

![image](assets/6.webp)

後でサーバーを手動で選択しますが、今はデフォルトのまま自動接続を選択しておいてください。

次に、ダミーウォレットを作成します - このウォレットには決して資金を入れないでください。このダミーウォレットの目的は、実際のウォレットを読み込む前にソフトウェアを通じてすべてがうまく機能していることを確認し、実際のウォレットでプライバシーを偶然にも放棄することを避けるためです。練習しているだけの場合、作成したウォレットはとにかくダミーウォレットと見なすことができます。

名前を「default_wallet」のままにすることも、好きな名前に変更することもできます。次に進むをクリックします。後で複数のウォレットを持っている場合は、この段階で「Choose...」を最初にクリックすることで、それらを見つけて開くことができます。

![image](assets/7.webp)

「Standard wallet」を選択し、<Next>をクリックします：

![image](assets/8.webp)

次に、「I already have a seed」を選択します。Electrumのシードを作成する習慣になってほしくないのですが、それは独自のプロトコルを使用しており、他のウォレットと互換性がないためです - これが「new seed」をクリックしない理由です。

![image](assets/9.webp)

https://iancoleman.io/bip39/ にアクセスし、ダミーシードを作成します。まず、単語数を12に変更します（これは一般的な習慣です）、次に「generate」をクリックし、ボックス内の単語をクリップボードにコピーします。

![image](assets/10.webp)

次に、その単語をElectrumに貼り付けます。こちらが一例です：

![image](assets/11.webp)

Electrumは、独自のプロトコルに一致する単語を探します。これを回避する必要があります。「options」をクリックし、BIP39 Seedを選択します：

![image](assets/12.webp)
種が有効になります。（これを行う前に、ElectrumはElectrumの種を期待していたため、この種は無効と見なされていました）。次へをクリックする前に、「Checksum OK」というテキストに注意してください。これは、進む前にこれを確認することが重要です（後で実際に使用するかもしれないウォレットのために）、なぜならそれはあなたが入力した種の有効性を確認するからです。下部近くの警告は無視しても構いません、それはElectrumの開発者がBIP39と彼らの「FUD'ey」な主張（他のウォレットと互換性のない彼らのバージョンが優れているという）について不平を言っているものです。

> 重要な警告のための短い迂回です。チェックサムの目的は、入力ミスなしに種を入力したことを確認することです。チェックサムは種の最終部分（12番目の単語がチェックサムの単語になります）で、数学的には種の最初の部分（11単語）によって決定されます。もし最初に何か間違ったことを入力した場合、チェックサムの単語は数学的に一致せず、ウォレットソフトウェアは警告であなたに知らせます。これは、種を使用して機能するBitcoinウォレットを作成できないという意味ではありません。入力ミスでウォレットを作成し、ビットコインでウォレットをロードした後、ある日ウォレットを復元する必要があるかもしれませんが、その際に入力ミスを再現しないと、間違ったウォレットを復元してしまいます！チェックサムが無効である場合でもElectrumがウォレットの作成を進めさせるのはかなり危険なので、警告されてください、確認するのはあなたの責任です。他のウォレットは進めさせないでしょう、それははるかに安全です。これは、Electrumを適切に使用する方法を学べば使用しても問題ないと言うときに意味することの1つです（Electrumの開発者はこれを修正すべきです）。

パスフレーズを追加したい場合は、このオプションウィンドウの一番上で選択する機会があります。

OKをクリックすると、種フレーズを入力した場所に戻ります。パスフレーズオプションを選択した場合、種単語と一緒にそれを入力しません（そのプロンプトは次に来ます）。

パスフレーズを要求しなかった場合、次にこの画面が表示されます - ウォレットスクリプトタイプと導出パスについてここで学ぶことができますが（https://armantheparman.com/public-and-private-keys/）、デフォルトのままにして進んでください。

![image](assets/13.webp)

> 追加情報：最初のオプションでは、レガシー（「1」で始まるアドレス）、ペイ・トゥ・スクリプト・ハッシュ（「3」で始まるアドレス）、またはbech32/ネイティブsegwit（「bc1q」で始まるアドレス）の間で選択できます。執筆時点で、Electrumはまだtaproot（「bc1p」で始まるアドレス）をサポートしていません。このウィンドウの2番目のオプションでは、導出パスを変更できます。特にその意味を理解する前には、これを変更しないことをお勧めします。人々は必要な場合にウォレットを回復できるように導出パスを書き留めることの重要性を強調しますが、デフォルトのままにしておけばおそらく問題ないので、パニックになることはありません - しかし、導出パスを書き留めるのはまだ良い習慣です。

次に、パスワードを追加するオプションが与えられます。これは「パスフレーズ」と混同しないでください。パスワードはコンピュータ上のファイルをロックします。パスフレーズはプライベートキーの構成の一部です。これがダミーウォレットであるため、パスワードを空白のままにして進むことができます。

![image](assets/14.webp)
新しいバージョン通知に関するポップアップが表示されます（「いいえ」を選択することをお勧めします）。その後、ウォレットは自動的に生成され、使用準備が整います（ただし、このウォレットは削除用であり、ダミーのウォレットであることを覚えておいてください）。
![image](assets/15.webp)

ソフトウェア環境を設定するために、私がお勧めするいくつかのことがあります（これは一度だけ必要です）：

### 単位をBTCに変更する

上部メニューから、ツール -> electrumの設定に進み、そこで一般タブの下に「基本単位」をBTCに変更するオプションがあります。
アドレスとコインのタブを有効にする

上部メニューから、表示を選択し、「アドレスを表示」を選択します。次に、再度表示に戻り、「コインを表示」を選択します。

### Oneserverを有効にする

デフォルトでは、Electrumはランダムなノードに接続します。また、多くの他のセカンダリノードにも接続します。これらのセカンダリノードとどのようなデータが交換されるのかは確信が持てませんが、プライバシーのためにこれが行われることは望みません。たとえあなたがノードを指定したとしても（例えば、自分のノード）、これらの複数の他のノードも接続され、どのような情報が共有されているのかは確かではありません。とにかく、これを防ぐのは簡単です。自分のノードを指定する方法をお見せする前に、Electrumが一度に1つのサーバーにのみ接続するように強制します。

> これはコマンドラインから「oneserver」を指定することで行う方法がありますが、この方法はお勧めしません。長い目で見て簡単で、他のノードに偶然接続することがないようにする別の方法をお見せします。

ダミーウォレットを使用している理由は、もし私たちが本物のウォレット、私たちの本物のビットコインをロードしていたら、今頃には（「サーバーを手動で設定」を開始時に選択していたとしても）ランダムなノードに接続してしまっていたでしょう（なぜかこれらの他のセカンダリノードにも接続します（ねえElectrumの開発者たち、これを修正すべきです）。もし私たちのウォレットがプライベートだったら、これは災害になっていたでしょう。

また、何らかのタイプのウォレットを最初にロードせずには、以下に示す手順を行うことはできません。（ウォレットがロードされると初めて作成され、編集の準備が整う設定ファイルを編集しようとしています）。

**Electrumをシャットダウンします（重要、これを行わないと、あなたが行う次の変更は消去されます）。**

### LINUX/MAC 設定ファイル

LinuxまたはMacでターミナルを開きます（Windowsの指示は後ほど）：

自動的にホームフォルダにいるはずです。そこから、隠されたelectrum設定フォルダに移動します（これはアプリケーションがある場所とは異なります）。

```bash
cd .electrum
```

「electrum」の前にドットがあることに注意してください。これは隠しフォルダであることを示しています。

別の方法としては、次のようにタイプします：

```bash
cd ~/.electrum
```

ここで「~」はホームディレクトリのパスを表します。現在のディレクトリの完全なパスは、「pwd」コマンドで確認できます。

「.electrum」ディレクトリにいるとき、「nano config」とタイプして<enter>を押します。

テキストエディタが開きます（nanoと呼ばれる）configファイルが開かれます。ここではマウスはあまり機能しません。矢印キーを使用して、次の行に移動します：

```json
"oneserver": false,
```

「false」を「true」に変更します。構文を乱さないでください（カンマやセミコロンを削除しないでください）。

<ctrl> xを押して終了し、「y」を押して保存し、ファイル名を編集せずに変更を確認するために<enter>を押します。
Electrumを再度実行してください。次に、右下の円をクリックすると、ネットワーク設定が開きます。その後、概要タブの上部近くで、「1つのノードに接続済み」と表示されるのを見ることができます。これは成功を示しています。
そのすぐ下にはテキストフィールドがあり、そこにサーバーのアドレスが記載されています。現在、そのランダムなノードに接続しています。次のセクションで、ノードへの接続について詳しく説明します。

### Windowsの設定ファイル

Windowsの設定ファイルを見つけるのは少し難しいです。ディレクトリは次のとおりです：`C:/Users/Parman/AppData/Roaming/Electrum`

明らかに、"Parman"をあなたのコンピュータのユーザー名に変更する必要があります。

そのフォルダ内で設定ファイルを見つけることができます。テキストエディタで開いて、次の行を編集してください：

```json
"oneserver": false,
```

"false"を"true"に変更してください。構文を崩さないでください（カンマやセミコロンを削除しないでください）。

その後、ファイルを保存して終了してください。

## Electrumをノードに接続する

次に、ダミーウォレットを自分の選択したノードに接続したいと思います。ノードを実行する準備ができていない場合は、以下のいずれかを行うことができます：

1. 友人の個人ノードに接続する（Torが必要）
2. 信頼できる会社のノードに接続する
3. ランダムなノードに接続する（推奨されません）。

ちなみに、自分のノードを実行する方法と、それを行うべき理由についてはこちらです（すべてノードセクションまたは無料コースで説明されています）。

### Tor経由で友人のノードに接続する（ガイドは近日公開予定。）

### 信頼できる会社のノードに接続する

これを行う唯一の理由は、ブロックチェーンにアクセスする必要があり、自分のノード（または友人のノード）が利用できない場合です。

Bitarooのノードに接続しましょう。彼らはデータを収集していないと言われています。彼らは情熱的なBitcoinerによって運営されているBitcoin Onlyの交換所です。彼らに接続することは少し信頼を必要としますが、監視会社である可能性のあるランダムなノードに接続するよりはましです。

ウォレットのウィンドウの右下部にある円をクリックして、ネットワーク設定にアクセスします（赤は接続されていないことを示し、緑は接続されていることを示し、青はTor経由で接続されていることを示します）。

![image](assets/16.webp)

円のアイコンをクリックすると、ポップアップウィンドウが表示されます：以前に強制したため、ウォレットは「1つのノードに接続済み」と表示します。

「サーバーを自動的に選択」のボックスのチェックを外し、その後、サーバーフィールドにBitarooの詳細を入力してください：

![image](assets/17.webp)

ウィンドウを閉じると、今度はBitarooのノードに接続されているはずです。確認するために、円が緑色であることを確認してください。もう一度クリックして、サーバーの詳細がランダムなノードに戻っていないことを確認してください。

### 自分のノードに接続する

自分のノードを持っている場合は素晴らしいことです。Bitcoin Coreのみを持っていて、Electrum SERVERを持っていない場合は、まだElectrum WALLETをノードに接続することはできません。

> 注意：Electrum ServerとElectrum Walletは異なるものです。サーバーは、Electrum WalletがBitcoinブロックチェーンと通信できるようにするために必要なソフトウェアです。なぜこのように設計されたのかはわかりませんが、速度のためかもしれませんが、間違っているかもしれません。
ノードソフトウェアパッケージ、例えばMyNode（初心者にお勧めするもの）、Raspiblitz（より上級者向けに推奨）、またはUmbrel（個人的にはまだ推奨していません。多くの問題を経験したため）を実行している場合、コンピューター（Raspberry Pi）が実行しているノードのIPアドレスを入力し、コロンと「50002」を加えることで、ウォレットを簡単に接続できます。これは前のセクションの画像で示されています。（後ほど、ノードのIPアドレスの見つけ方をお見せします。）

ネットワーク設定を開きます（右下の緑または赤の円をクリック）。"select server automatically"のチェックを外し、私が行ったようにIPアドレスを入力します。あなたのIPアドレスは異なりますが、コロンと「50002」は同じであるべきです。

![image](assets/18.webp)

ウィンドウを閉じると、今度はあなたのノードに接続されているはずです。確認するには、もう一度円をクリックし、サーバーの詳細がランダムなノードに戻っていないことを確認してください。

時には、すべて正しく行っているにもかかわらず、接続を拒否されることがあります。試してみるべきことはこちらです…

- Electrumとノードソフトウェアを新しいバージョンにアップグレードする
- ".electrum"ディレクトリ内のキャッシュフォルダを削除してみる
- ネットワーク設定でポートを50002から50001に変更してみる
- 代替手段としてTorを使用して接続するためのこのガイドを使用する（https://armantheparman.com/tor/）
- ノード上でElectrum Serverを再インストールする

## ノードのIPアドレスの見つけ方

IPアドレスは、一般的なユーザーが調べて使用する方法を普通は知らないものです。多くの人がノードを実行し、その後ウォレットをノードに接続する際に、IPアドレスを見つけることがしばしば障害となるようです。

MyNodeの場合、ブラウザウィンドウに次のように入力します：`mynode.local`

時には、「mynode.local」が機能しないことがあります（Google検索バーに入力していることがないようにしてください。テキストをアドレスとして認識させ、検索ではないようにするために、テキストの前に`http://`のように入力します。それでも機能しない場合は、「s」を加えて、このように試してみてください：`https://mynode.local`。

これによりデバイスにアクセスでき、設定リンクをクリックする（下の私の青い「円」を参照）と、IPアドレスが表示される画面が表示されます：

![image](assets/19.webp)

このページが読み込まれると、ノードのIP（青い「円」）が表示されます。

![image](assets/20.webp)

その後、将来的には、ブラウザに192.168.0.150、またはhttp://192.168.0.150と入力できます。

Raspiblitzの場合（画面を接続しない場合）、異なる方法が必要です（これはMyNodeにも適用されます）：

ルーターのウェブページにログインします - ここで接続されているすべてのデバイスのIPアドレスを見つけることができます。ルーターのウェブページは、ウェブブラウザに入力するIPアドレスになります。私の場合は次のようになります：

    http://192.168.0.1

ルーターへのログイン資格情報を取得するには、ユーザーマニュアルを参照するか、時にはルーター自体のステッカーに記載されていることもあります。ユーザー名とパスワードを探します。見つからない場合は、User: "admin" Password: "password"を試してみてください。

ログインできたら、接続されているデバイスが表示され、その名前からノードがどれかが明確になるかもしれません。IPアドレスがそこにあります。
### 最初の2つの方法が失敗した場合、最後の方法は機能しますが、手間がかかります：
まず、ネットワーク上の任意のデバイス（現在使用しているコンピュータで構いません）のIPアドレスを見つけます。

Macでは、ネットワーク環境設定で見つけることができます：

![image](assets/21.webp)

私たちが興味を持っているのは、最初の4つの要素（192.168.0）であり、画像で見ることができる4番目の要素、「166」（あなたのものは異なるでしょう）ではありません。

Linuxの場合は、コマンドラインを使用します：

```bash
ifconfig | grep inet
```

その垂直線は「パイプ」記号であり、<delete>キーの下にあります。いくつかの出力とIPアドレスが表示されます。（127.0.0.1は無視してください、それは違いますし、ネットマスクも無視してください）

Windowsの場合は、コマンドプロンプト（cmd）を開き、次のように入力します：

```bash
ipconfig/all
```

そして、Enterキーを押します。IPアドレスは出力で見つけることができます。

これが簡単な部分でした。難しい部分は、今度はあなたのノードのIPアドレスを見つけることです - 私たちはブルートフォースで推測する必要があります。例えば、あなたのコンピュータのIPアドレスが192.168.0.xxxで始まるとしましょう。その場合、あなたのノードについては、ブラウザで次のように試してみてください：`https://192.168.0.2`

最小の可能な数は2です（0は任意のデバイスを意味し、1はルーターに属します）そして、最高は255だと思います（これはバイナリで11111111であり、1バイトで保持できる最大の数です）。

一つずつ、255に向かって進んでいきます。最終的に、MyNodeページ（またはRaspiBlitzページ）をロードする正しい番号で停止します。その後、Electrumネットワーク設定に入力する番号がわかります。

それは次のようになります（コロンとその後の番号を含めることを忘れないでください）：

![image](assets/22.webp)

> これらのIPアドレスがあなたの家庭内ネットワークに内部的に存在することを知っておくと便利です。外部の人には見えず、機密情報ではありません。これらは大きな組織内の電話の内線のようなもので、異なる電話へとあなたを導きます。

## ダミーウォレットの削除

これで、一つのノードにのみ正常に接続しました。これからは、Electrumはデフォルトでこのようにロードされます。安全でない方法で作成されたこの不安全なウォレットに誤って資金を送信する可能性があるため、ダミーウォレットを削除してください（メニュー：ファイル -> 削除）。

## 練習用ウォレットの作成

ダミーウォレットを削除した後、同じ方法で新しいウォレットを作成し、今回はシードフレーズを書き留めてかなり安全な場所に保管してください。

高いセキュリティが必要なハードウェアウォレット（cumbersome hardware wallet）を使わずに、Electrumの動作をこの練習用ウォレットで学ぶのは良いアイデアです。このウォレットには少額のビットコインのみを入れてください - このお金を失うと仮定してください。熟練したら、ハードウェアウォレットを使ってElectrumを使用する方法を学びます。

作成した新しいウォレットでは、アドレスのリストが表示されます。緑色のものは「受信アドレス」と呼ばれます。これらは3つの要素の産物です：

- シードフレーズ
- パスフレーズ
- 導出パス

新しいウォレットには、シード、パスフレーズ、導出パスを持つ任意のソフトウェアウォレットが数学的かつ再現可能に作成できる受信アドレスのセットがあります。それらは43億以上あります！必要以上に多いです。Electrumは最初の20個のみを表示し、最初のものを使い切るとさらに多くを表示します。
ビットコインの秘密鍵に関する詳細情報は、このガイドで見つけることができます。
![image](assets/23.webp)

これは、一度に1つのアドレスのみを提示する他のウォレットとは大きく異なります。

このウォレットを作成する際にシードフレーズを入力したため、Electrumは各アドレスの秘密鍵を持っており、これらのアドレスからの支出が可能です。

また、「変更アドレス」と呼ばれる黄色のアドレスにも注意してください。これらは別の数学的枝（他に43億個存在）からの別のアドレスセットです。ウォレットは、余剰資金を変更としてウォレットに自動的に送り返すためにこれらを使用します。例えば、1.5ビットコインを取り、0.5を商人に支払った場合、残りの1.0はどこかに行く必要があります。ウォレットは、次の空の黄色の変更アドレスにそれを支払います。さもなければ、それはマイナーに行ってしまいます！この件についての詳細情報（UTXOsについて）は、このガイドを参照してください。(https://armantheparman.com/utxo/)

次に、Ian Colmanの秘密鍵ウェブサイトに戻り、シードを入力します（新たに生成する代わりに）。下にスクロールすると、秘密鍵と公開鍵の情報が変わるのがわかります。ページ上部のものに依存して、下部のすべてが変わります。

> 実際のビットコインウォレットのシードをコンピューターに入力するべきでは「決して」ありません。マルウェアによって盗まれる可能性があります。私たちは学習目的のために練習用のウォレットを使用しているので、今のところは大丈夫です。

スクロールダウンして、BIP84（segwit）タブをクリックして、Electrumウォレットに合わせて導出パスを変更します。

![image](assets/24.webp)

その下に、アカウント拡張秘密鍵とアカウント拡張公開鍵が表示されます：

![image](assets/25.webp)

Electrumに行って、それらが一致するか比較します。上部にメニューがあります、wallet -> information：

![image](assets/26.webp)

これが表示されます：

![image](assets/27.webp)

2つの公開鍵が一致していることに注意してください。

次に、アドレスを比較します。Ian Colemanのサイトに戻って、一番下までスクロールします：

![image](assets/28.webp)

Electrum内のアドレスと一致していることに注意してください。

次に、変更アドレスをチェックします。少し上にスクロールして、導出パスの最後の0を1に変更します：

![image](assets/29.webp)

今度は下にスクロールして、アドレスがElectrum内の黄色のアドレスと一致するか比較します。

なぜこれを行ったのでしょうか？

私たちは、シードワードを2つの異なる独立したソフトウェアプログラムを通して入力し、同じ情報を提供していることを確認しました。これにより、悪意のあるコードが内部に潜んでおり、偽の秘密鍵や公開鍵、またはアドレスを提供しているリスクが大幅に低減されます。

次に行うべきことは、小さなテストを受け取り、ウォレット内の別のアドレスにそれを移動（支出）することです。

## ウォレットのテスト（使い方を学ぶ）

ここでは、ウォレットにUTXOを受け取り、それを（支出して）ウォレット内の別のアドレスに移動する方法を示します。これは、失っても構わない非常に小さな金額です。

これにはいくつかの目的があります。

- 新しいウォレットでコインを支出する力を持っていることを証明します。
- Electrumソフトウェアを使用して支出を行う方法（およびいくつかの機能）をデモンストレーションします。これは、安全性を高めるために追加の複雑さ（ハードウェアウォレットやエアギャップコンピューターの使用）を加える前に行います。
- 受け取りと支出のために選択できる多くのアドレスが同じウォレット内にあるという考えを強化します。
Electrumウォレットのテスト版を開き、「アドレス」タブをクリックしてから、最初のアドレスを右クリックし、「コピー」→「アドレス」を選択してください：
![image](assets/30.webp)

これで、アドレスはコンピュータのメモリに保存されました。

次に、あなたがビットコインを保有している取引所にアクセスし、このアドレスに少額（例えば50,000サトシ）を引き出しましょう。例としてCoinbaseを使用しますが、これは最も一般的に使用されている取引所であるにもかかわらず、ビットコインの敵であり、古い放置されたアカウントにログインすることに嫌悪感を感じています。

ログインし、「送金/受取」ボタンをクリックします。現時点ではウェブページの右上隅にあります。

![image](assets/31.webp)

明らかに私はCoinbaseに資金を持っていませんが、資金があると想像して進めてください：Electrumからのアドレスを「宛先」フィールドに貼り付けます。また、金額を選択する必要があります（50,000サトシ程度をお勧めします）。「任意のメッセージ」を入力しないでください – Coinbaseはあなたのデータを十分に収集（そして販売）していますので、彼らを助ける必要はありません。最後に、「続行」をクリックします。その後どのようなポップアップが表示されるかはわかりませんが、自分で対処してください。ただし、すべての取引所で方法は似ています。

![image](assets/32.webp)

取引所によっては、ウォレットにサトシが即座に表示されることもあれば、数時間から数日の遅延があることもあります。

Electrumは、ブロックチェーン上で確認されていなくても、受け取ったコインを表示します。あなたが持っているコインは、ビットコインノードの待機リスト、または「メンプール」から読み取られています。ブロックに乗ると、資金が確認されたと表示されます。

ウォレットにUTXOがあるので、ラベルを付けるべきです。このラベルは私たちだけが見ることができ、公開台帳とは何の関係もありません。Electrumのラベルは、使用しているコンピュータ上でのみ表示されます。実際には、ファイルを保存し、同じウォレットを実行している別のコンピュータにすべてのラベルを復元するために使用できます。

### UTXOにラベルを付ける

このテストウォレットに寄付が必要でした。@SathoarderからライブUTXO（10,000サトシ）を提供してもらい、別の人（匿名）が同じアドレスに寄付しました（5,000サトシ）。最初のアドレスの残高には15,000サトシがあり、合計2つのトランザクションがあります（最も右の列）。下部には、10,000サトシが確認され、さらに5,000サトシが未確認（まだメンプール内）です。

![image](assets/33.webp)

「コイン」タブに移動すると、2つの「受け取ったコイン」またはUTXOを見ることができます。これらは同じアドレス内にあります。

![image](assets/34.webp)

アドレスタブに戻り、アドレスの隣の「ラベル」エリアをダブルクリックすると、テキストを入力し、<enter>を押して保存できます：

![image](assets/35.webp)

これは、コインの出所、KYCフリーかどうか、そして各UTXOがあなたにいくらかかったか（税金を計算して政府に盗まれる必要がある場合）を追跡できるようにするための良い習慣です。
理想的には、同じアドレスに複数のコインを蓄積することは避けるべきです。それを行うことにした場合（お勧めしませんが）、アドレスメソッドを使用して、すべてのコインに同じラベルを付けるのではなく、各コインにラベルを付けることができます。「コイン」タブに実際に行ってラベルを編集することはできません（いいえ、それは直感的すぎます！）。履歴タブに移動し、トランザクションを見つけて、それにラベルを付ける必要があります。そうすると、コインセクションでラベルが表示されます。コインセクションで見るラベルは、アドレスラベルまたは履歴ラベルからのものですが、履歴ラベルはアドレスラベルを上書きします。ラベルをファイルにバックアップするには、上部のメニューからエクスポートできます。wallet→labels→export。

次に、最初のアドレスから二番目のアドレスへコインを送金しましょう。最初のアドレスを右クリックして「spend from」を選択します（このシナリオでは実際には必要ありませんが、多くのアドレスに多くのコインがあると想像してください。この機能を使用すると、ウォレットに望むコインのみを使用させることができます。複数のアドレスの複数のコインを選択したい場合は、コマンドキーを押しながら左マウスクリックでアドレスを選択し、右クリックして「spend from」を選択できます：

![image](assets/36.webp)

それを行うと、ウォレットウィンドウの下部に緑色のバーが表示され、選択したコインの数と使用可能な合計が表示されます。

アドレス内の個々のコインを選択して他のコインを除外することもできますが、これは推奨されません。なぜなら、1つのコインを使用することで暗号学的に弱まったアドレスにコインを残してしまうからです（プライバシー上の理由以外で複数のコインを1つのアドレスに入れない理由のもう1つは、1つを使う場合はすべてを使うべきであり、これは不必要に費用がかかるためです）。共有アドレスから単一のコインを選択する方法はこちらですが、行わないでください：

![image](assets/37.webp)

これで、支出用に2つのコインが選択されました。次に、それらをどこに送るかを決めます。二番目のアドレスに送りましょう。以下のようにアドレスをコピーします：

![image](assets/38.webp)

次に、「Send」タブに移動し、「pay to」フィールドに二番目のアドレスを貼り付けます。説明を追加する必要はありません。追加することもできますが、後でラベルを編集することで行うことができます。金額には、「Max」を選択して、選択したすべてのコインを使用します。次に「Pay」をクリックし、表示されるポップアップで「advanced」ボタンをクリックします。

![image](assets/39.webp)

この段階で常に「advanced」をクリックすると、トランザクションの中身を正確に確認し、細かい制御を得ることができます。こちらがトランザクションです：

![image](assets/40.webp)

内部には2つの白いボックス/ウィンドウが見えます。上部は入力ウィンドウ（どのコインが使用されているか）、下部は出力（コインがどこに行くか）です。

注目すべきは、現時点でのステータス（左上）は「unsigned」です。「Amount sent」は0です。なぜなら、コインはウォレット内で転送されているからです。手数料は481サトシです。もし480サトシだった場合、最後のゼロはこのように落ちて、0.0000048となり、疲れた目には48サトシのように見えるかもしれませんので注意してください（Electrumの開発者が修正すべき点です）。
取引のサイズは、ビットコインの量ではなく、バイト単位のデータサイズを指します。「replace by fee」はデフォルトでオンになっており、必要に応じてより高い手数料で取引を再送信できます。LockTimeは取引が有効になるタイミングを調整することを可能にします - 私はまだそれを試していませんが、何をしているのかを完全に理解し、少額での練習を積んでいない限り、使用することはお勧めしません。

下部には、いくつかの高度なマイニング手数料調整ツールがあります。内部転送に必要なのは、最小手数料の1 sat/byteに設定することだけです。目標手数料フィールドに数字を手動で入力してください。外部支払いに適切な手数料を確認するには、https://mempool.space を参照してmempoolの混雑具合を確認し、いくつかの推奨手数料が表示されます。

![image](assets/41.webp)

私は1 sat/byteを選択しました。

入力ウィンドウでは、2つのエントリが見られます。最初のものは5000 satの寄付です。左側にその取引ハッシュ（ブロックチェーンで検索できます）が表示されています。その隣には「21」とあり、その取引でラベル付けされた21番目の出力であることを示しています（最初の出力がゼロとラベル付けされているため、実際には22番目の出力です）。

ここで注目すべき点：UTXOは取引内にのみ存在します。UTXOを使用するには、それを参照し、その参照を新しい取引の入力に入れる必要があります。その後、出力は新しいUTXOとなり、古いUTXOはSTXO（Spent transaction output）となります。

2行目は10,000 satの寄付です。それが来た取引ハッシュの隣に「0」があるのは、その取引の最初の（そしておそらく唯一の）出力であるためです。

下部のウィンドウでは、私たちのアドレスが見えます。入力のビットコイン合計は出力の合計と完全には一致しません。差額はマイナーに渡ります。マイナーは、採掘しようとしているブロック内のすべての取引の差額を見て、その数値を自身の報酬に加えます。（このようにしてのマイニング手数料は、取引の連鎖から完全に切り離され、新たな生命を始めます）。

マイニング手数料を調整すると、出力値は自動的に変更されます。

> ここで指摘しておく価値があります：取引ウィンドウのアドレスの色に注意してください。緑色のアドレスはあなたのアドレスタブにリストされていることを覚えておいてください。取引ウィンドウでアドレスが緑色（または黄色）でハイライトされている場合、Electrumはそのアドレスを自分のものと認識しています。アドレスにハイライトがない場合、それは外部のアドレス（現在開いているウォレットに外部の）であり、特に注意して確認する必要があります。

取引のすべてをチェックし、どのコインを使って、コインがどこに行くのかについて満足していることを確認したら、「finalise」をクリックできます。

![image](assets/42.webp)

「finalise」をクリックすると、それ以上の編集はできなくなります - 必要があれば、これを閉じて再度始める必要があります。「finalise」ボタンは「export」に変わり、新しいボタンが現れます：「save」、「combine」、「sign」、「broadcast」。「broadcast」ボタンは、この段階では取引が未署名で無効であるため、グレーアウトされています。

「sign」をクリックすると、ウォレットにパスワードがある場合はそれを求められ、その後、ステータス（右上）が「Unsigned」から「Signed」に変わります。すると、「Broadcast」ボタンが利用可能になります。
放送した後、トランザクションウィンドウを閉じることができます。アドレスタブに移動すると、最初のアドレスが空で、2番目のアドレスに1つのUTXOがあることがわかります。
注：トランザクションがブロックにマイニングされたり、「確認」される前であっても、これらの変更がすべて見えることに注意してください。これは、Electrumがブロックチェーンデータだけでなく、mempoolデータに基づいても残高/トランザクションを更新するためです。すべてのウォレットがこれを行うわけではありません。

指摘しておきたいのは、放送する代わりに、トランザクションを後で保存することができるということです。未署名または署名済みの状態のいずれかで保存できます。

「エクスポート」ボタンをクリックします（逆説的ですが、「保存」ボタンはクリックしないでください）。すると、いくつかのオプションが表示されます。トランザクションはテキストでエンコードされているため、いくつかの方法で保存できます。

![image](assets/43.webp)

QRコードへの保存は非常に興味深いです。これを選択すると、QRコードが表示されます：

![image](assets/44.webp)

その後、QRコードの写真を撮ることができます。これにはいくつかのことができますが、今のところ、後でウォレットに再度読み込むとしましょう。Electrumを閉じ、ウォレットを再度読み込み、メニューのツールに移動します：

![image](assets/45.webp)

これにより、コンピュータのカメラが起動します。その後、電話のQRコードの写真をカメラに見せると、トランザクションがまさに残したとおりに再度読み込まれます。

保存されたトランザクションを読み込む方法は直感的ではないので、特に注意してください。トランザクションの読み込みは「ツール」としてではなく、オプションがツールメニューに隠されています（Electrumの開発者が修正すべき別のこと）。

ファイルとして保存されたトランザクションでも同様のプロセスが可能です。同じウォレット内でどちらの方法でも練習してみてください。ここでは詳しく説明しませんが、この機能を使用して、異なるコンピューター上の同じウォレット間、マルチシグネチャウォレット間、ハードウェアウォレットとの間でトランザクションをやり取りすることができます。こちらがいくつかの指示です。

「保存」ボタンに戻ると、これはトランザクションテキストを保存する方法ではありません。これが実際に行うのは、ローカルコンピュータ上でこのトランザクションを支払いとして提出されたものとしてElectrumウォレットに認識させることです。もしこれを誤って行った場合、小さなコンピュータアイコンが付いたトランザクションが表示されます。右クリックしてトランザクションを削除できます - この方法でビットコインを削除することはできませんので、心配しないでください。Electrumはこのトランザクションが発生したことを忘れ、satsを「返金」し、実際に存在する正しい場所にsatsを表示します。

### 変更アドレス

変更アドレスは興味深いものです。この説明を理解するには、UTXOを理解する必要があります。UTXOよりも小さい金額をアドレスに送金する場合、変更出力が指定されていない限り、残りのビットコインはマイナーに行きます。

例えば、6.15ビットコインのUTXOを持っていて、世界のどこかで専制的な「民主的」政府に抑圧されている抗議者に0.15ビットコインを寄付したいとします。その場合、Electrumの「spend from」機能を使用して6.15ビットコインをトランザクションに入れます。

抗議者のアドレスを「pay to」フィールドに貼り付け、「description」フィールドには「EndTheFed & WEF」と入力し、金額には0.15ビットコインを入力して「pay」、次に「advanced」をクリックします。
取引画面では、入力ウィンドウに6.15ビットコインのUTXOが表示されます。出力ウィンドウでは、ハイライトされていないアドレス（これが抗議者のアドレスです）の横に0.15ビットコインが表示されます。また、6.0ビットコインよりわずかに少ない黄色のアドレスも見ることができます。これは、ウォレットが自身の黄色のお釣りアドレスの中から自動的に選択したお釣りアドレスです。お釣りアドレスの目的は、ウォレットが受け取りアドレスの利用可能性を乱すことなく、そこにお釣りコインを入れることができるようにするためです。例えば、後で顧客によって使用される予定がある場合、ウォレットが自動的にそれらを使用して満たしてしまうことは望ましくありません。それは散らかっていてプライバシーにも悪いです。
マイニング手数料を調整すると、支払い金額ではなく、お釣りの出力金額が自動的に調整されることに注意してください。

### 手動での変更または複数への支払い

これはElectrumの非常に興味深い機能です。以下のようにアクセスします。

![image](assets/46.webp)

次に、このようにして、使用しているUTXO残高の複数の宛先を入力できます：

![image](assets/47.webp)

アドレスを貼り付け、コンマを入力し、スペースを入れ、金額を入力し、<enter>を押し、もう一度繰り返します。"AMOUNT"ウィンドウに金額を入力しないでください - Electrumは"Pay to"ウィンドウに個々の金額を入力するところに合計を表示します。

これにより、お釣りがどこに行くかを手動で決定できます（例：ウォレット内の特定のアドレス、または別のウォレット）、または一度に多くの人に支払うことができます。UTXOのサイズに合わないほど合計が低い場合でも、Electrumは追加のお釣り出力を作成します。

Pay to Many機能は、独自の「PayJoins」や「CoinJoins」を作成する可能性も提供します - この記事の範囲外ですが、こちらにガイドがあります。(https://armantheparman.com/cj/)

## ウォレット

Electrumを使用したWatching Only Walletをデモンストレーションしたいと思います。それを行うには、まず「ウォレット」とは何かを定義する必要があります。Bitcoinでは「ウォレット」には2つの使い方があります：

- タイプA、「ウォレット」 - Electrum、Blue Wallet、Sparrow Walletなど、アドレスと残高を表示するソフトウェアを指します。

- タイプB、「ウォレット」 - seed_phrase/passphrase/derivation_pathの組み合わせに関連付けられたユニークなアドレスのコレクションを指します。任意のウォレットには86億のアドレスがあります（43億の受け取りアドレスと43億のお釣りアドレス）。seed phrase、passphrase、またはderivation pathのいずれかを変更すると、新しく、すべてユニークな86億の空のアドレスを持つ未使用のウォレットが得られます。

誰かが「ウォレット」という言葉を使用するときにどちらのタイプを指しているかは文脈で明らかです。

## Watching Wallet - 一つの演習

Watching Walletが何のためにあるのかは完全には明らかではありませんが、まず何であるか、練習用のものをどのように作るかを説明し、その後、ハードウェアウォレットについてもっと説明するときにその目的に戻ります。（ハードウェアウォレットの使用方法と、特定のブランドに関する詳細なレビューについては、こちらをご覧ください。）
私たちは、パスフレーズを少し複雑にしたダミーの通常のウォレットを作成し、その後に対応するウォッチングウォレットを作成します。もしお望みであれば、私が作成したものをそのままコピーすることも、あなた自身のものを作成することもできます - このウォレットは破棄されるものです。実際には使用しないでください。まず、Ian Colemanのウェブサイトを使用して12語のシードを生成します。
以下のスクリーンショットにある12のランダムな単語に注目し、パスフレーズフィールドにパスフレーズを入力したことを確認してください：

PASSPHRASE: 「Craig Wrightは嘘つきで詐欺師であり、刑務所にいるべきです。また、Ross Ulbrichtは直ちに刑務所から釈放されるべきです。」

パスフレーズは最大100文字まで可能で、理想的にはあいまいでなく短すぎないものが望ましいです - 私が使用したものは単なる冗談です - パスフレーズを覚える際に組み合わせを試すストレスを減らすため、一般的には大文字や記号の使用を避けることをお勧めします。

![image](assets/48.webp)

次に、Electrumでメニューファイル→新規/復元に進みます。新しいウォレットを作成するためにユニークな名前を入力し、「次へ」をクリックします。

![image](assets/49.webp)

次のステップは既に慣れているはずなので、画像なしでリストします：

- 標準ウォレット
- 既にシードを持っている
- 12語をボックスにコピー＆ペーストするか、手動で入力します。
- オプションをクリックし、BIP39を選択し、パスフレーズのチェックマークもクリックします（「このシードをカスタムワードで拡張する」）
- Ian Colemanのページで行ったのと同じようにパスフレーズを正確に入力します
- デフォルトのスクリプトセマンティクスと導出パスをそのままにします
- パスワードを追加する必要はありません（ウォレットをロックします）

次に、Ian Colemanのサイトに戻り、「導出パス」セクションまで下にスクロールし、「BIP 84」タブをクリックして、Electrumのデフォルトと同じスクリプトセマンティクス（ネイティブSegwit）を選択します。

![image](assets/50.webp)

拡張された秘密鍵と公開鍵はすぐ下にあり、導出パス（またはページ上部の他の何か）を変更すると変わります。

![image](assets/51.webp)

また、「BIP32拡張秘密/公開鍵」も表示されますが、今のところ無視します。

アカウント拡張秘密鍵を使用すると、ウォレットを完全に再生成できます。しかし、アカウント拡張公開鍵は、同じウォレットの限定版（ウォッチングウォレット）のみを生成できます - この鍵をElectrumに入れると、シードや拡張秘密鍵が持っていたであろう86億のアドレスすべてが生成されますが、Electrumには秘密鍵が利用できないため、支出は不可能です。今、その点を実演するためにやってみましょう：

「アカウント拡張公開鍵」をクリップボードにコピーします。

次に、Electrumに戻り、作成したウォレットを開いたままにして、ファイル→新規/復元に進みます。以前とは少し異なるプロセスでウォレットを作成します：

- 標準ウォレット
- マスターキーを使用する
- 拡張公開鍵をボックスに貼り付けて進む
- パスフレーズを入力する必要はありません。それはすでに拡張公開鍵の一部です
- スクリプトセマンティクスと導出パスを入力する必要はありません
- パスワードを追加する必要はありません（ウォレットをロックします）

ウォレットが読み込まれたとき、以前シードが入力されたときと全く同じアドレスが読み込まれることに気づくはずです。また、タイトルバーの一番上に「ウォッチングウォレット」と表示されていることにも気づくでしょう。このウォレットでは、アドレスと残高（ノードを介して残高を確認することにより）を表示できますが、ウォッチングウォレットには秘密鍵がないため、トランザクションに署名することはできません。
それでは、その意味は何ですか？
一つの理由、そして主な理由ではありませんが、コンピューター上のマルウェアにプライベートキーをさらすことなく、コンピューター上でウォレットとその残高を観察する可能性があることです。

もう一つの理由は、コンピューターからプライベートキーをオフにして保持することを選択した場合、支払いを行うためにはそれが必要であるということです。説明しましょう：

> ハードウェアウォレット（HWW）は、デバイスがプライベートキーを安全に（PINでロックされて）保持し、コンピューターに接続されていてもキーをコンピューターにさらさないようにし、インターネットに接続することができないように作られました。そのようなデバイスは、すべてのビットコイン取引がブロックチェーン上のUTXO（未使用トランザクション出力）を参照して始まるため、自身では取引を行うことができません（ノード上にあります）。ウォレットは、UTXOがどのトランザクションIDにあり、どのトランザクションの出力が使用されるかを指定する必要があります。入力を指定した後で初めて新しい取引が作成され、それが署名されます。ハードウェアウォレットはUTXOにアクセスできないため、取引を作成することができません - それらは何にも接続されていません！通常、HWWから拡張公開キーが抽出され、アドレスがコンピューター上に表示されます - 多くの人がLedgerソフトウェアやTrezor Suiteがコンピューター上でアドレスと残高を表示するのを見たことがあるでしょう - これは監視ウォレットです。これらのプログラムは取引を作成することができますが、署名することはできません。彼らはHWWに接続されているHWWによってのみ取引を署名することができます。HWWは監視ウォレットから新しく生成された取引を受け取り、それを署名し、それからコンピューターに戻してノードにブロードキャストします。HWWは自身でブロードキャストすることはできません、それに関連する監視ウォレットがそれを行います。この方法で、2つのウォレット（コンピューター上の公開キーウォレット、およびHWW内のプライベートキーウォレット）は、プライベートキーをインターネットに接続されたデバイスから隔離し、遠ざけながら、生成、署名、およびブロードキャストを協力して行います。

## 部分的に署名されたビットコイン取引（PSBT）

取引が作成され、ファイルに保存され、後で再読み込みされ、署名され、保存され、後で再読み込みされ、そして最終的にブロードキャストされることが可能です - 誰もがこれを必要とするわけではありませんが、可能であるということです。

3つの5つのマルチシグネチャウォレットを考えてみてください - 5つのプライベートキーがウォレットを作成し、3つが取引を完全に署名するために必要です（マルチシグネチャウォレットキーについてもっと学ぶにはこちらを参照してください）。5つの異なるコンピューターがそれぞれ5つのプライベートキーのうちの1つを持っていることが可能です。

コンピューター1は取引を生成して署名することができます。それから、ファイルを保存し、電子メールでコンピューター2に送信することができます。コンピューター2はそれに署名し、ファイルをQRコードに保存し、Zoomコールを介して世界の反対側にあるコンピューター3にQRを送信することができます。コンピューター3はQRをキャプチャし、取引をエレクトラムに読み込み、取引に署名することができます。最初の2つの署名の後、取引はPSBT（部分的に署名されたビットコイン取引）でした。3番目の署名の後、取引は完全に署名され有効になり、ブロードキャストの準備ができました。

PSBTについてもっと学ぶには、このガイドを参照してください。(https://armantheparman.com/psbt/)

## Electrumでのハードウェアウォレットの使用

一般的にハードウェアウォレットを使用する方法に関するガイドがありますが、HWWに新しい人にとって重要だと思います。(https://armantheparman.com/using-hwws/)
以下は、Sparrow Bitcoin Walletなど、さまざまなブランドのHWW（ハードウェアウォレット）の接続ガイドが見つかるリンクです。(https://armantheparman.com/hwws/)
これは、Electrumを使用してハードウェアウォレットを使う方法を示す私の最初のガイドになります。ColdCardハードウェアウォレットを使用してデモンストレーションします。これはColdCardに特化した詳細なガイドではありません。そのガイドはこちらです。私が示しているのは、Electrum固有のポイントのみです。(https://armantheparman.com/cc/)

### マイクロSDカード経由での接続（エアギャップ）

ColdCardを介して実際のウォレットを接続する前に、Electrumのダミーウォレットをロードし、ネットワークパラメータを設定する初期ステップを踏んでいることを願います。

次に、ColdCardにSDカードを挿入します。すでにシードを作成していると仮定します。ウォレットにパスフレーズでアクセスする場合は、今それを適用してください。スクロールダウンして、メニューの「Advanced/Tools」→「Export Wallet」→「Electrum Wallet」を選択します。

メッセージをスクロールダウンして読むことができます。常に「1」を選択して非ゼロのアカウント番号（導出パスの一部）を入力するように提案しますが、私のアドバイスに従っていれば、デフォルトの導出パスをいじっていないので、非ゼロのアカウント番号は必要ないでしょう。チェックマークを押して続行してください。

次に、スクリプトのセマンティクスを選択します。ほとんどの人が「Native Segwit」を選択するでしょう。

「Electrum wallet file written」と表示され、ファイル名が表示されます。それを心に留めておいてください。

次に、マイクロSDカードを取り出してElectrumがインストールされたコンピュータに挿入します。

一部のオペレーティングシステムでは、microSDを挿入すると自動的にファイルエクスプローラーが開きます。多くの人が新しいウォレットファイルを見てダブルクリックし、なぜ動作しないのか疑問に思うでしょう。これはあまり良い設計ではありません。実際にはファイルエクスプローラーを無視して（閉じて）、Electrumを使用してウォレットファイルを開く必要があります：

Electrumを開きます。他のウォレットで既に開いている場合は、ファイル→新規を選択します。このウィンドウを探しています：

![image](assets/52.webp)

ここにコツがありますが、直感的ではありません。「選択」をクリックします。次に、microSDカード上のファイルシステムをナビゲートして、ウォレットファイルを見つけて開きます。

これで、ハードウェアウォレットに対応する監視ウォレットを開きました。素晴らしいです。

### USBケーブル経由での接続。

この方法は簡単なはずですが、Linuxコンピュータでははるかに難しいです。「Udev rules」を更新する必要があります。こちらが詳細なガイドです(https://armantheparman.com/gpg-articles/)、そして簡単に説明すると：

システムを最新の状態に保つことが良いアイデアです。その後：

```bash
sudo apt-get install libusb-1.0-0-dev libudev-dev
```

その後...

```bash
python3 -m pip install ckcc-protocol
```

エラーが出た場合はpipがインストールされているか確認してください。（pip –version）で確認でき、（sudo apt install python3-pip）でインストールできます。

既存のファイルを作成または変更します、/etc/udev/rules.d/

このように：

```bash
sudo nano /etc/udev/rules.d
```

テキストエディタが開きます。こちらからテキストをコピーしてrules.dファイルに貼り付け、保存して終了します。

![image](assets/53.webp)

その後、これらのコマンドを順番に実行します：

```bash
sudo groupadd plugdev
sudo usermod -aG plugdev $(whoami)
sudo udevadm control –reload-rules && sudo udevadm trigger
```
「group plugdev」が既に存在するというメッセージが表示されても問題ありません。そのまま進んでください。2番目のコマンドの後、フィードバックや返信はありませんが、そのまま3番目のコマンドに進んでください。
ColdCardをコンピュータに再接続する必要があるかもしれません。

これらすべての後でもまだColdCardに接続できない場合は、ファームウェアの更新を試してみてください（ガイドは近日中に提供予定ですが、現時点ではメーカーのウェブサイトで指示を見つけることができます）。

次に、新しいウォレットを作成してください：

- 標準ウォレット
- ハードウェアデバイスを使用
- ColdCardをスキャンして検出します。そのまま進んでください。
- スクリプトの意味論と導出パスを選択
- ウォレットファイルを暗号化するかどうか決定（推奨）

### ColdCardを使用したトランザクション

ケーブルが接続されている場合、トランザクションは簡単です。トランザクションの署名はシームレスに行われます。

デバイスをエアギャップ状態で使用する場合は、microSDカードを使用して保存されたトランザクションをデバイス間で手動で渡す必要があります。いくつかのコツがあります。

トランザクションを作成して最終化した後、左下隅のエクスポートボタンをクリックする必要があります。「ファイルに保存」と表示されますが、直感に反して、これは私たちが望むものではありません。実際には、最後のメニューオプションである「ハードウェアウォレット用」に最初に行き、その選択肢の中からもう一つの「ファイルに保存」を見つけて選択する必要があります。その後、ファイルをmicroSDに保存し、カードを取り出してColdCardに入れます。正しいウォレットを選択するためにパスフレーズを適用する必要があるかもしれません。画面には署名の準備ができていると表示されます。チェックマークをクリックし、トランザクションを検査し、チェックマークで確認して進んでください。完了したら、カードを取り出してコンピュータに戻します。

次に、electrumを使用してトランザクションを開く必要があります。この機能はメニューツール -> トランザクションの読み込みに隠されています。ファイルシステムをナビゲートしてファイルを見つけます。署名するたびに3つのファイルがあります。Watching Walletが作成した元の保存ファイルと、ColdCardによって作成された2つのファイルです（なぜこれを行うのかはわかりません）。一つは「署名済み」と表示され、もう一つは「最終」と表示されます。直感的ではありませんが、「署名済み」のファイルは役に立たず、「最終」のトランザクションを開く必要があります。

それを読み込んだら、「ブロードキャスト」をクリックして支払いを行うことができます。

## Electrumと隠された「.electrum」ディレクトリの更新

Electrumはコンピュータ上に2か所に存在します。アプリケーション自体と、隠された設定フォルダです。そのフォルダはオペレーティングシステムによって異なる場所にあります：

Windows:

> C:/Users/your_user_name_goes_here/AppData/Roaming/Electrum

Mac:

> /Users/your_user_name_goes_here/.electrum

Linux:

> /home/your_user_name_goes_here/.electrum

LinuxとMacで「electrum」の前に「.」があることに注意してください。これはディレクトリが隠されていることを示します。また、このディレクトリはElectrumを初めて実行したときにのみ（自動的に）作成されることにも注意してください。ディレクトリにはelectrumの設定ファイルと、保存したウォレットを保持するディレクトリが含まれています。

コンピュータからElectrumプログラムを削除しても、隠されたディレクトリは残ります。それも積極的に削除しない限りです。
Electrumをアップグレードするには、最初に説明したダウンロードと検証の手順を踏みます。そうすると、コンピューター上にプログラムのコピーが2つあり、どちらを実行しても構いません - 各プログラムは同じ隠しElectrumフォルダにアクセスして、設定とウォレットへのアクセスを行います。基本単位、接続するデフォルトのノード、その他の設定、ウォレットへのアクセスなど、私たちが保存したすべてのものは、それらがそのフォルダに保存されているため、残ります。

### Electrumとウォレットを別のコンピューターに移動する

これを行うには、プログラムファイルをUSBドライブにコピーし、.electrumディレクトリもコピーします。それから、それらを新しいコンピューターにコピーまたは移動します。プログラムを再度検証する必要はありません。.electrumディレクトリをデフォルトの場所にコピーすることを忘れないでください（そのコンピューターでElectrumを初めて実行する前にコピーしてください。そうしないと、空のデフォルトの.electrumフォルダが作成され、混乱するかもしれません）。

## ラベル

以前説明したように、アドレスタブにはラベル列があります。そこをダブルクリックして、自分用のメモを入力できます（これはあなたのコンピューター上にのみ存在し、公開されず、ブロックチェーン上にもありません）。

![image](assets/54.webp)

Electrumウォレットを別のコンピューターに移動するとき、これらのメモを失いたくないかもしれません。メニューからファイルにバックアップできます。wallet–> labels –>exportを使用し、新しいコンピューターでは、wallet–>labels–>importを使用します。

## ヒント:

このリソースが役立つと思われる場合、Bitcoinに対して私が行っていることをサポートしたいと思われるなら、ここにいくつかのsatsを寄付することができます：

Static Lightning Address: dandysack84@walletofsatoshi.com
https://armantheparman.com/electrum/